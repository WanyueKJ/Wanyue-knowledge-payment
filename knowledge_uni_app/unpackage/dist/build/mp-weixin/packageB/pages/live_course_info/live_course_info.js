require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageB/pages/live_course_info/live_course_info"],{"35b0":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,Math.floor(parseInt(t.com_data.star))),i=0==t.kongkong?t.__map(t.com_data.list,(function(e,n){var i=t.__get_orig(e),a=Math.floor(parseInt(e.star));return{$orig:i,g1:a}})):null;t.$mp.data=Object.assign({},{$root:{g0:n,l0:i}})},o=[]},7781:function(t,e,n){"use strict";n.r(e);var i=n("35b0"),a=n("7e57");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("b0c8");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=u.exports},"7e57":function(t,e,n){"use strict";n.r(e);var i=n("d548"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"8f91":function(t,e,n){},"939c":function(t,e,n){"use strict";(function(t){n("1754");i(n("66fd"));var e=i(n("7781"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},b0c8:function(t,e,n){"use strict";var i=n("8f91"),a=n.n(i);a.a},d548:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){n.e("components/uni-ui/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("d075"))}.bind(null,n)).catch(n.oe)},a=getApp(),o={components:{uniNavBar:i},data:function(){return{scrollH:0,tabIndex:0,tabBars:[{name:"详情"},{name:"评价"}],live_course_bg:"",liveInfo:{},hidefudao:"",teacherInfo:{id:"",avatar:"",user_nickname:""},fudaoTeacher:{id:"",avatar:"",user_nickname:""},paytype:"",userpasswordkHidden:!0,feedbackpassword:"",passwordcontent:"",getcourseid:"",nums:"",courseid:"",pingjia_content:"",stararr:[1,2,3,4,5],com_data:{},kongkong:!0,INFO:[],lesson:"",islive:"0",sort:"",type:5,sorttype:"视频讲解",ifbuy:0,animationData:[],isHidden:1}},onShow:function(){var t=this;setTimeout((function(){t.getPingjia(t.courseid),t.getCourseInfo(t.getcourseid),t.getnums()}),500),this.isHidden=1},onReady:function(){var e=this,n=this;t.getSystemInfo({success:function(t){n.scrollH=750*t.windowHeight/t.windowWidth-600-70,n.scrollH=750*t.windowHeight/t.windowWidth-750-70}}),this.getnums();var i=-7;setInterval((function(){var n=t.createAnimation({duration:400,delay:0});-7==i?i=0:0==i&&(i=-7),n.translateX(i).step(),e.animationData=n.export()}),400)},onLoad:function(t){this.getCourseInfo(t.courseid),this.getcourseid=t.courseid,this.courseid=t.courseid,this.getPingjia(t.courseid)},methods:{setLogin:function(){return""!=a.globalData.userinfo||(t.showModal({title:"请先登录你的账号",content:"",showCancel:!0,cancelText:"取消",confirmText:"立即登录",confirmColor:"#2C62EF",success:function(e){e.confirm&&t.navigateTo({url:"../../../pages/login/login"})},fail:function(){},complete:function(){}}),!1)},getnums:function(){var e=this,n=a.globalData;t.request({url:n.site_url+"Cart.GetNums",header:{"Content-Type":"application/x-www-form-urlencoded;text/html;charset=utf-8"},method:"POST",data:{uid:n.userinfo.id,token:n.userinfo.token},success:function(t){void 0!=t.data.data.info[0]&&(e.nums=t.data.data.info[0].nums)}})},getPingjia:function(e){var n=this,i=a.globalData;t.request({url:i.site_url+"Comment.GetList",method:"GET",data:{uid:i.userinfo.id,token:i.userinfo.token,courseid:e,p:1},success:function(t){if("0"==t.data.data.code){var e=t.data.data.info[0];void 0!=e.list&&e.list.length>0&&(n.kongkong=!1),n.com_data=e}},fail:function(){t.showToast({icon:"none",title:"网络错误"})}})},changeTab:function(t){this.tabIndex=t},onChangeTab:function(t){this.tabIndex=t.detail.current},backCourseList:function(){t.navigateBack({delta:1})},openpinglun:function(){var e=this.setLogin();e&&t.navigateTo({url:"../../../pages/pinglun/pinglun?courseid="+this.courseid+"&title="+this.liveInfo.name+"&avatar="+this.teacherInfo.avatar+"&nickname="+this.teacherInfo.user_nickname})},enterpasslive:function(){var t=this.setLogin();t&&(console.log(this.ifbuy),0==this.ifbuy?this.userpasswordkHidden=!1:this.enterlive())},submitPassword:function(){var e=this;t.showLoading({title:"......",icon:"none"});var n=this.passwordcontent;this.userpasswordkHidden=!0;var i=a.globalData;t.request({url:i.site_url+"Course.CheckPass",method:"POST",data:{pass:n,courseid:this.getcourseid,uid:i.userinfo.id,token:i.userinfo.token},success:function(n){t.hideLoading(),t.showToast({title:n.data.data.msg,icon:"none"}),0==n.data.data.code&&e.enterlive()},fail:function(){t.hideLoading()},complete:function(){}})},getCourseInfo:function(e){var n=this,i=a.globalData;t.request({url:i.site_url+"Course.GetDetail",method:"GET",data:{uid:i.userinfo.id,token:i.userinfo.token,courseid:e},success:function(e){if(0==e.data.data.code){n.sort=e.data.data.info[0].sort,n.type=parseInt(e.data.data.info[0].type),4==n.type||1==n.type?n.sorttype="ppt讲解":5==n.type?n.sorttype="普通直播":6==n.type||3==n.type?n.sorttype="音频讲解":7==n.type?n.sorttype="白班互动":8==n.type&&(n.sorttype="普通直播"),n.INFO=e.data.data.info;var i=e.data.data.info[0]||[];n.lesson=e.data.data.info[0].lesson,n.islive=e.data.data.info[0].islive,n.live_course_bg=i.thumb,n.liveInfo=i,n.teacherInfo=i.userinfo,n.paytype=e.data.data.info[0].paytype,n.ifbuy=e.data.data.info[0].ifbuy,i.tutor.length<1?n.hidefudao="1":(n.fudaoTeacher.id=i.tutor[0].id,n.fudaoTeacher.avatar=i.tutor[0].avatar,n.fudaoTeacher.user_nickname=i.tutor[0].user_nickname)}else t.navigateTo({url:"../../../pages/login/login",success:function(t){},fail:function(){},complete:function(){}})}})},viewTeacherInfo:function(e){var n=this.setLogin();n&&t.navigateTo({url:"../../../pages/teacherinfo/teacherinfo?touid="+e})},showError:function(e){t.showToast({icon:"none",title:e,duration:3e3})},enterpaylive:function(){var t=this.setLogin();t&&1==this.liveInfo.ifbuy&&this.enterlive()},enterlive:function(){var e=this.setLogin();if(e){var n=this.liveInfo;7==n.type?t.showToast({title:"白板直播暂未接入",icon:"none"}):t.navigateTo({url:"../live-info/live-infoplay?liveuid="+n.uid+"&courseid="+n.id+"&lessonid=0&thumb="+this.live_course_bg})}},submitCancle:function(){this.userpasswordkHidden=!0},doAddCar:function(){var e=this,n=a.globalData;t.request({url:n.site_url+"Cart.Add",method:"POST",data:{type:"0",typeid:this.getcourseid,uid:n.userinfo.id,token:n.userinfo.token},success:function(n){e.getCourseInfo(e.getcourseid),e.getnums(),t.showToast({title:n.data.data.msg})}})},shopcar:function(){t.navigateTo({url:"../../../pages/shop-car/shop-car"})},buy:function(){t.navigateTo({url:"../../../pages/pay/pay?info="+encodeURIComponent(JSON.stringify(this.INFO))})}}};e.default=o}).call(this,n("543d")["default"])}},[["939c","common/runtime","common/vendor"]]]);