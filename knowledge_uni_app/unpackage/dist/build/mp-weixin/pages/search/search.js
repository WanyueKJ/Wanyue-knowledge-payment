(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"4fe6":function(e,t,a){"use strict";(function(e){a("1754");o(a("66fd"));var t=o(a("50ad"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t.default)}).call(this,a("543d")["createPage"])},"50ad":function(e,t,a){"use strict";a.r(t);var o=a("96cf"),n=a("5dcf");for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("c255");var c,s=a("f0c5"),r=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);t["default"]=r.exports},"5dcf":function(e,t,a){"use strict";a.r(t);var o=a("80f3"),n=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a},"80f3":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){a.e("components/common/common-list").then(function(){return resolve(a("f971"))}.bind(null,a)).catch(a.oe)},n=function(){a.e("components/user-list/user-list").then(function(){return resolve(a("982c"))}.bind(null,a)).catch(a.oe)},i=getApp(),c={components:{commonList:o,userList:n},data:function(){return{scrollH:0,list:[],searchList:[],type:"post",teacherList:{},courseList:{},isShowHis:!1,kongkong:!1,searchText:"",searchKeyword:"",teacherInfo:{},sdata:"",system_top:10}},onNavigationBarButtonTap:function(e){0===e.index&&this.searchEvent()},onReady:function(){var t=this;e.getSystemInfo({success:function(e){t.scrollH=750*e.windowHeight/e.windowWidth}})},onLoad:function(t){var a=this;e.getSystemInfo({success:function(e){a.system_top=parseInt(e.safeArea.top)+5}}),"undefined"!=t.keyword&&""!=t.keyword&&(this.sdata=t.keyword,this.searchKeyword=t.keyword,this.getHomeSearch(this.sdata))},methods:{checktoken:function(t){e.request({url:getApp().globalData.site_url+"User.Iftoken",method:"POST",data:{uid:getApp().globalData.userinfo.id,token:getApp().globalData.userinfo.token},success:function(a){700==a.data.data.code&&e.showModal({title:a.data.data.msg,content:"",showCancel:!0,cancelText:"取消",confirmText:"去登录",confirmColor:"#2C62EF",success:function(t){t.confirm&&e.navigateTo({url:"../login/login",success:function(e){},fail:function(){},complete:function(){}})},fail:function(){},complete:function(){}}),t(a.data.data.code)},fail:function(){},complete:function(){}})},clickTabSearchHistory:function(e){this.searchText=e,this.searchEvent()},searchEvent:function(){var t=this;e.showLoading({title:"加载中...",mask:!1}),setTimeout((function(){switch(t.type){case"post":t.searchList=demo1;break;case"topic":t.searchList=demo2;break;case"user":t.searchList=demo3;break}e.hideLoading()}),3e3)},viewTeacherInfo:function(t){var a=this;this.checktoken((function(o){0==o&&(a.getTeacherInfo(t),e.navigateTo({url:"../teacherinfo/teacherinfo?touid="+t}))}))},getTeacherInfo:function(t){var a=this,o=i.globalData;e.request({url:o.site_url+"Teacher.GetHome",method:"GET",data:{uid:o.userinfo.id,token:o.userinfo.token,touid:t},success:function(t){if("700"==t.data.data.code&&(e.navigateTo({url:"../login/login"}),i.globalData.login_jump.page="../search/search",i.globalData.login_jump.data=a.teacherList),0===parseInt(t.data.data.code)){var o=t.data.data.info[0];a.teacherInfo=o}}})},viewLiveInfo:function(t,a){this.checktoken((function(o){0==o&&(void 0==a?e.navigateTo({url:"../../packageB/pages/taocaninfo/taocaninfo?courseid="+t}):0==a?e.navigateTo({url:"../../packageB/pages/content-info/content-info?courseid="+t}):1==a?e.navigateTo({url:"../../packageB/pages/courseinfo/courseinfo?courseid="+t}):e.navigateTo({url:"../../packageB/pages/live_course_info/live_course_info?courseid="+t}))}))},resetSearch:function(){this.sdata="",this.searchKeyword="",this.teacherList={},this.courseList={},this.isShowHis=!1,this.getHomeSearch(this.searchKeyword),e.navigateBack({delta:1})},onInput:function(e){""!=e.detail.value&&null!=e.detail.value||(this.teacherList={},this.courseList={},this.isShowHis=!1),this.searchKeyword=e.detail.value,this.getHomeSearch(this.searchKeyword)},getHomeSearch:function(t){var a=this;e.request({url:i.globalData.site_url+"Home.Search",method:"GET",data:{gradeid:i.globalData.grade_class.id,keyword:t},success:function(e){if(0===parseInt(e.data.data.code)){var t=e.data.data.info[0];if(0==parseInt(e.data.data.code)){if(0==t.teacher.length&&0==t.course.length)return a.isShowHis=!1,void(a.kongkong=!0);a.kongkong=!1}else a.kongkong=!0;a.teacherList=t.teacher,a.courseList=t.course,a.isShowHis=!0}else a.kongkong=!0}})},viewmoreteacher:function(){""!=getApp().globalData.userinfo?e.navigateTo({url:"../moreteacher/moreteacher?keyword="+this.searchKeyword}):e.navigateTo({url:"../login/login",success:function(e){},fail:function(){},complete:function(){}})}}};t.default=c}).call(this,a("543d")["default"])},8886:function(e,t,a){},"96cf":function(e,t,a){"use strict";var o;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var n=function(){var e=this,t=e.$createElement;e._self._c},i=[]},c255:function(e,t,a){"use strict";var o=a("8886"),n=a.n(o);n.a}},[["4fe6","common/runtime","common/vendor"]]]);