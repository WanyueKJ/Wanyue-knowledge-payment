(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/edit_user/edit_user"],{"3ab9":function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return n}));var o=function(){var t=this,a=t.$createElement;t._self._c},i=[]},"46c4":function(t,a,e){"use strict";(function(t){e("1754");n(e("66fd"));var a=n(e("f4dc"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(a.default)}).call(this,e("543d")["createPage"])},6943:function(t,a,e){"use strict";var n=e("edb4"),o=e.n(n);o.a},b8e7:function(t,a,e){"use strict";e.r(a);var n=e("f977"),o=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(a,t,(function(){return n[t]}))}(i);a["default"]=o.a},edb4:function(t,a,e){},f4dc:function(t,a,e){"use strict";e.r(a);var n=e("3ab9"),o=e("b8e7");for(var i in o)"default"!==i&&function(t){e.d(a,t,(function(){return o[t]}))}(i);e("6943");var u,r=e("f0c5"),s=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);a["default"]=s.exports},f977:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=o(e("2b9a"));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){e.e("components/uni-ui/uni-nav-bar/uni-nav-bar").then(function(){return resolve(e("d075"))}.bind(null,e)).catch(e.oe)},u=getApp(),r={components:{uniNavBar:i},data:function(){return{userInfo:{},avatarPath:"",user_nickname:""}},onLoad:function(a){""!=u.globalData.userinfo?(this.avatarPath=u.globalData.userinfo.avatar,this.user_nickname=u.globalData.userinfo.user_nickname):t.navigateTo({url:"../login/login"})},methods:{back:function(){t.navigateBack({delta:1})},photo:function(){u.globalData;var a=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var o=e.tempFilePaths,i=o[0];t.request({url:u.globalData.site_url+"Upload.GetQiniuToken",method:"POST",data:{uid:u.globalData.userinfo.id,token:u.globalData.userinfo.token},success:function(e){if(t.hideLoading(),void 0!=e.data.data&&0==e.data.data.code){var o=a.decypt(e.data.data.info[0].token),r="UNIAPP"+a.getTime()+"icon.png";n.default.upload(i,(function(e){t.showToast({title:"上传成功",icon:"none"}),a.avatarPath=e.imageURL}),(function(a){t.showToast({title:"上传失败，请重试",icon:"none"})}),{region:"ECN",domain:u.globalData.qiniuimageurl,key:r,uptoken:o})}else t.showToast({icon:"none",title:"七牛云未配置,请先配置"})},fail:function(){t.hideLoading(),t.showToast({title:"提交失败",icon:"none"})}})}})},getTime:function(){var t=new Date,a=t.getFullYear(),e=t.getMonth()+1,n=t.getDate(),o=t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),u=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+e+n+o+i+u},decypt:function(t){for(var a="",e="1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&",n=0;n<t.length;n++)for(var o=t[n],i=0;i<e.length;i++){var u=e[i];o==u&&(a+=0==i?e[e.length-1]:e[i-1])}return a},getUserNickname:function(t){this.user_nickname=t.detail.value},saveEdit:function(){var a=u.globalData;t.request({url:a.site_url+"User.UpUserInfo",method:"POST",data:{uid:a.userinfo.id,token:a.userinfo.token,fields:JSON.stringify({user_nickname:this.user_nickname,avatar:this.avatarPath})},success:function(a){0==a.data.data.code&&(u.globalData.userinfo.user_nickname=a.data.data.info[0].user_nickname,u.globalData.userinfo.avatar=a.data.data.info[0].avatar,t.setStorage({key:"userinfo",data:u.globalData.userinfo,success:function(t){console.log(t)}}),setTimeout((function(){t.navigateBack({delta:1})}),150)),t.showToast({icon:"none",title:a.data.data.msg})},fail:function(){t.showToast({title:"网络错误",icon:"none"})}})}}};a.default=r}).call(this,e("543d")["default"])}},[["46c4","common/runtime","common/vendor"]]]);