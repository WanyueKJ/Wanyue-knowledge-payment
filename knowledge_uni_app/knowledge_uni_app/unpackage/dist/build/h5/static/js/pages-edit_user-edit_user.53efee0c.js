(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-edit_user-edit_user"],{"05e2":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".pass-login-btn[data-v-54f6d9af]{width:80%;font-size:%?30?%;color:#646464;background-color:#65ccb9}.main[data-v-54f6d9af]{width:90%;margin:calc(20%) auto;text-align:center}.save-btn[data-v-54f6d9af]{color:#3bdca8}.save-btn2[data-v-54f6d9af]{color:#3bdca8;margin-top:%?70?%}.avatar-wrap[data-v-54f6d9af]{width:%?180?%;height:%?200?%;display:inline-block;margin-bottom:%?80?%}.user-avatar[data-v-54f6d9af]{width:%?150?%;height:%?150?%;-webkit-border-radius:50%;border-radius:50%}.tishi[data-v-54f6d9af]{display:block;font-size:%?18?%;color:#969696}.nickname-wrap[data-v-54f6d9af]{border-bottom:%?2?% solid #969696;width:50%;height:%?60?%;margin:0 auto}",""]),t.exports=e},"0994":function(t,e,n){"use strict";var a=n("5d71"),i=n.n(a);i.a},"1e9a":function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("f9f5")),o=a(n("da80")),r={name:"UniNavBar",data:function(){return{isliuhai:!1,system_top:0}},components:{uniStatusBar:i.default,uniIcons:o.default},created:function(){var e=uni.getSystemInfoSync();this.system_top=parseInt(e.safeArea.top)+60,t("log",e," at components/uni-ui/uni-nav-bar/uni-nav-bar.vue:89"),t("log",this.system_top," at components/uni-ui/uni-nav-bar/uni-nav-bar.vue:90")},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0}},mounted:function(){uni.report&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft:function(){this.$emit("clickLeft")},onClickRight:function(){this.$emit("clickRight")}}};e.default=r}).call(this,n("0de9")["log"])},"2bcc":function(t,e,n){"use strict";n.r(e);var a=n("a0a0"),i=n("af38");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("4c41");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"75aa3dcd",null,!1,a["a"],r);e["default"]=s.exports},"2fdf":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-status-bar",style:{height:t.statusBarHeight}},[t._t("default")],2)},o=[]},"3a87":function(t,e,n){"use strict";n.r(e);var a=n("e887"),i=n("e4e7");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("0994");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"54f6d9af",null,!1,a["a"],r);e["default"]=s.exports},"4c41":function(t,e,n){"use strict";var a=n("6865"),i=n.n(a);i.a},"5d71":function(t,e,n){var a=n("05e2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("6334c607",a,!0,{sourceMap:!1,shadowMode:!1})},6865:function(t,e,n){var a=n("e754");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("51139693",a,!0,{sourceMap:!1,shadowMode:!1})},"7c49":function(t,e,n){(function(e){n("ac1f"),n("1276"),function(){var n={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1};function a(t){n={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1},i(t)}function i(t){t.region?n.qiniuRegion=t.region:e("error","qiniu uploader need your bucket region"," at qiniuUploader.js:36"),t.uptoken?n.qiniuUploadToken=t.uptoken:t.uptokenURL?n.qiniuUploadTokenURL=t.uptokenURL:t.uptokenFunc&&(n.qiniuUploadTokenFunction=t.uptokenFunc),t.domain&&(n.qiniuImageURLPrefix=t.domain),n.qiniuShouldUseQiniuFileName=t.shouldUseQiniuFileName}function o(t,a,o,s,l,c,d,f){if(null!=t)if(s&&i(s),n.qiniuUploadToken)r(t,a,o,s,l,c,d,f);else if(n.qiniuUploadTokenURL)u((function(){r(t,a,o,s,l,c,d,f)}));else{if(!n.qiniuUploadTokenFunction)return void e("error","qiniu uploader need one of [uptoken, uptokenURL, uptokenFunc]"," at qiniuUploader.js:73");if(n.qiniuUploadToken=n.qiniuUploadTokenFunction(),null==n.qiniuUploadToken&&n.qiniuUploadToken.length>0)return void e("error","qiniu UploadTokenFunction result is null, please check the return value"," at qiniuUploader.js:68");r(t,a,o,s,l,c,d,f)}else e("error","qiniu uploader need filePath to upload"," at qiniuUploader.js:53")}function r(t,a,i,o,r,u,l,c){if(null==n.qiniuUploadToken&&n.qiniuUploadToken.length>0)e("error","qiniu UploadToken is null, please check the init config or networking"," at qiniuUploader.js:80");else{var d=s(n.qiniuRegion),f=t.split("//")[1];o&&o.key&&(f=o.key);var p={token:n.qiniuUploadToken};n.qiniuShouldUseQiniuFileName||(p["key"]=f),l&&l();var v=wx.uploadFile({url:d,filePath:t,name:"file",formData:p,success:function(t){var o=t.data;try{var r=JSON.parse(o),u=n.qiniuImageURLPrefix+"/"+r.key;r.fileUrl=u,r.imageURL=u,e("log",r," at qiniuUploader.js:112"),a&&a(r)}catch(s){e("log","parse JSON failed, origin String is: "+o," at qiniuUploader.js:117"),i&&i(s)}},fail:function(t){e("error",t," at qiniuUploader.js:124"),i&&i(t)},complete:function(t){c&&c(t)}});v.onProgressUpdate((function(t){r&&r(t)})),u&&u((function(){v.abort()}))}}function u(t){wx.request({url:n.qiniuUploadTokenURL,success:function(a){var i=a.data.uptoken;i&&i.length>0?(n.qiniuUploadToken=i,t&&t()):e("error","qiniuUploader cannot get your token, please check the uptokenURL or server"," at qiniuUploader.js:154")},fail:function(t){e("error","qiniu UploadToken is null, please check the init config or networking: "+t," at qiniuUploader.js:158")}})}function s(t){var n=null;switch(t){case"ECN":n="https://up.qiniup.com";break;case"NCN":n="https://up-z1.qiniup.com";break;case"SCN":n="https://up-z2.qiniup.com";break;case"NA":n="https://up-na0.qiniup.com";break;case"ASG":n="https://up-as0.qiniup.com";break;default:e("error","please make the region is with one of [ECN, SCN, NCN, NA, ASG]"," at qiniuUploader.js:171")}return n}t.exports={init:a,upload:o}}()}).call(this,n("0de9")["log"])},a0a0:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniIcons:n("1d12").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"status_bar"}),n("v-uni-view",{staticClass:"uni-navbar__content",class:{"uni-navbar--fixed":t.fixed,"uni-navbar--shadow":t.shadow,"uni-navbar--border":t.border},style:{"background-color":t.backgroundColor}},[n("v-uni-view",{staticClass:"uni-navbar__header uni-navbar__content_view",style:{color:t.color,backgroundColor:t.backgroundColor}},[n("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__header-btns-left uni-navbar__content_view",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickLeft.apply(void 0,arguments)}}},[t.leftIcon.length?n("v-uni-view",{staticClass:"uni-navbar__content_view"},[n("uni-icons",{attrs:{color:t.color,type:t.leftIcon,size:"24"}})],1):t._e(),t.leftText.length?n("v-uni-view",{staticClass:"uni-navbar-btn-text uni-navbar__content_view",class:{"uni-navbar-btn-icon-left":!t.leftIcon.length}},[n("v-uni-text",{style:{color:t.color,fontSize:"14px"}},[t._v(t._s(t.leftText))])],1):t._e(),t._t("left")],2),n("v-uni-view",{staticClass:"uni-navbar__header-container uni-navbar__content_view"},[t.title.length?n("v-uni-view",{staticClass:"uni-navbar__header-container-inner uni-navbar__content_view"},[n("v-uni-text",{staticClass:"uni-nav-bar-text",staticStyle:{"{color":"#000000 }"}},[t._v(t._s(t.title))])],1):t._e(),t._t("default")],2),n("v-uni-view",{staticClass:"uni-navbar__header-btns uni-navbar__content_view",class:t.title.length?"uni-navbar__header-btns-right":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickRight.apply(void 0,arguments)}}},[t.rightIcon.length?n("v-uni-view",{staticClass:"uni-navbar__content_view"},[n("uni-icons",{attrs:{color:t.color,type:t.rightIcon,size:"24"}})],1):t._e(),t.rightText.length&&!t.rightIcon.length?n("v-uni-view",{staticClass:"uni-navbar-btn-text uni-navbar__content_view"},[n("v-uni-text",{staticClass:"uni-nav-bar-right-text"},[t._v(t._s(t.rightText))])],1):t._e(),t._t("right")],2)],1)],1)],1)},o=[]},a326:function(t,e,n){"use strict";var a=n("b53a"),i=n.n(a);i.a},ab58:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=uni.getSystemInfoSync().statusBarHeight+"px",i={name:"UniStatusBar",data:function(){return{statusBarHeight:a}}};e.default=i},af38:function(t,e,n){"use strict";n.r(e);var a=n("1e9a"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},b53a:function(t,e,n){var a=n("e84e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("fac578d8",a,!0,{sourceMap:!1,shadowMode:!1})},c861:function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("7c49")),o=a(n("2bcc")),r=getApp(),u={components:{uniNavBar:o.default},data:function(){return{userInfo:{},avatarPath:"",user_nickname:""}},onLoad:function(e){""!=r.globalData.userinfo?(t("log",getApp().globalData.userinfo," at pages/edit_user/edit_user.vue:44"),this.avatarPath=getApp().globalData.userinfo.avatar,this.user_nickname=getApp().globalData.userinfo.user_nickname):uni.navigateTo({url:"../login/login"})},methods:{back:function(){uni.navigateBack({delta:1})},photo:function(){r.globalData;var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){var a=n.tempFilePaths;t("log",n," at pages/edit_user/edit_user.vue:69");var o=a[0];uni.request({url:getApp().globalData.site_url+"Upload.GetQiniuToken",method:"POST",data:{uid:getApp().globalData.userinfo.id,token:getApp().globalData.userinfo.token},success:function(a){if(uni.hideLoading(),0==a.data.data.code){var r=e.decypt(a.data.data.info[0].token),u="UNIAPP"+e.getTime()+"icon.png";t("log",u," at pages/edit_user/edit_user.vue:86"),i.default.upload(o,(function(t){uni.showToast({title:"上传成功",icon:"none"}),e.avatarPath=t.imageURL}),(function(e){uni.showToast({title:"上传失败，请重试",icon:"none"}),t("log","上传失败"," at pages/edit_user/edit_user.vue:99"),t("log",n," at pages/edit_user/edit_user.vue:100")}),{region:"ECN",domain:getApp().globalData.qiniuimageurl,key:u,uptoken:r})}},fail:function(){uni.hideLoading(),uni.showToast({title:"提交失败",icon:"none"})}})}})},getTime:function(){var t=(new Date).getFullYear(),e=(new Date).getMonth()+1,n=(new Date).getDate(),a=(new Date).getHours(),i=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),o=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();return t+e+n+a+i+o},decypt:function(t){for(var e="",n="1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&",a=0;a<t.length;a++)for(var i=t[a],o=0;o<n.length;o++){var r=n[o];i==r&&(e+=0==o?n[n.length-1]:n[o-1])}return e},getUserNickname:function(t){this.user_nickname=t.detail.value},saveEdit:function(){var e=r.globalData;t("log",this.user_nickname," at pages/edit_user/edit_user.vue:157"),uni.request({url:e.site_url+"User.UpUserInfo",method:"POST",data:{uid:e.userinfo.id,token:e.userinfo.token,fields:JSON.stringify({user_nickname:this.user_nickname,avatar:this.avatarPath})},success:function(e){t("log",e," at pages/edit_user/edit_user.vue:171"),0==e.data.data.code&&(getApp().globalData.userinfo.user_nickname=e.data.data.info[0].user_nickname,getApp().globalData.userinfo.avatar=e.data.data.info[0].avatar,uni.setStorage({key:"userinfo",data:getApp().globalData.userinfo,success:function(e){t("log",e," at pages/edit_user/edit_user.vue:180"),t("log","更新本地头像和名字成功"," at pages/edit_user/edit_user.vue:181"),t("log",getApp().globalData.userinfo," at pages/edit_user/edit_user.vue:182")}}),setTimeout((function(){uni.navigateBack({delta:1})}),300)),uni.showToast({icon:"none",title:e.data.data.msg}),parseInt(e.data.data.code)},fail:function(){uni.showToast({title:"网络错误",icon:"none"})}})}}};e.default=u}).call(this,n("0de9")["log"])},cc4b:function(t,e,n){"use strict";n.r(e);var a=n("ab58"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},e4e7:function(t,e,n){"use strict";n.r(e);var a=n("c861"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},e754:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".status_bar[data-v-75aa3dcd]{height:0;width:100%;background-color:#fff}\n\n/* .uni-navbar {\n\twidth: 100%;\n\theight: 104rpx;\n\tbackground-color: #07C160;\n} */.uni-nav-bar-text[data-v-75aa3dcd]{margin-top:%?10?%;font-size:%?34?%}.uni-nav-bar-right-text[data-v-75aa3dcd]{font-size:%?28?%}.uni-navbar__content[data-v-75aa3dcd]{position:relative;overflow:hidden}.uni-navbar__content_view[data-v-75aa3dcd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:64px}.uni-navbar__header[data-v-75aa3dcd]{height:44px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;line-height:44px;font-size:16px}.uni-navbar__header-btns[data-v-75aa3dcd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;width:%?120?%;padding:0 6px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-navbar__header-btns-left[data-v-75aa3dcd]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?150?%;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.uni-navbar__header-btns-right[data-v-75aa3dcd]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?150?%;padding-right:%?30?%;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;margin-top:%?20?%}.uni-navbar__header-container[data-v-75aa3dcd]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.uni-navbar__header-container-inner[data-v-75aa3dcd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%}.uni-navbar__placeholder-view[data-v-75aa3dcd]{height:44px}.uni-navbar--fixed[data-v-75aa3dcd]{position:fixed;z-index:998}.uni-navbar--shadow[data-v-75aa3dcd]{-webkit-box-shadow:0 1px 6px #ccc;box-shadow:0 1px 6px #ccc}.uni-navbar--border[data-v-75aa3dcd]{border-bottom-width:%?1?%;border-bottom-style:solid;border-bottom-color:#d9d9d9}",""]),t.exports=e},e84e:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".uni-status-bar[data-v-611f6ff8]{width:%?750?%;height:20px\n\t\t/* height: var(--status-bar-height);\n */}",""]),t.exports=e},e887:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"main"},[n("v-uni-view",{staticClass:"avatar-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.photo.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"user-avatar",attrs:{src:t.avatarPath,mode:"aspectFill"}}),n("v-uni-text",{staticClass:"tishi"},[t._v("点击更换头像")])],1),n("v-uni-view",[n("v-uni-input",{staticClass:"nickname-wrap",attrs:{type:"text",value:t.user_nickname},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.getUserNickname.apply(void 0,arguments)}}})],1)],1),n("v-uni-button",{staticClass:"pass-login-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveEdit.apply(void 0,arguments)}}},[t._v("保存")])],1)},o=[]},f9f5:function(t,e,n){"use strict";n.r(e);var a=n("2fdf"),i=n("cc4b");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("a326");var r,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"611f6ff8",null,!1,a["a"],r);e["default"]=s.exports}}]);