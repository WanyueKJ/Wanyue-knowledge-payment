(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-yijian-fankui-yijian-fankui"],{"35a8":function(i,e,n){"use strict";(function(i){var t=n("4ea4");n("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=t(n("7c49")),o=getApp(),u={data:function(){return{imgPath:"",isUpload:!1,yijian:"",QiNiutoken:""}},computed:{enabled:function(){return""==this.yijian}},onLoad:function(){this.imgPath="../../static/creatRoomThumb.png"},methods:{photo:function(){uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var n=this;uni.request({url:getApp().globalData.site_url+"Upload.GetQiniuToken",method:"POST",data:{uid:getApp().globalData.userinfo.id,token:getApp().globalData.userinfo.token},success:function(e){if(i("log",e," at pages/yijian-fankui/yijian-fankui.vue:57"),uni.hideLoading(),0==e.data.data.code){n.QiNiutoken=n.decypt(e.data.data.info[0].token),uni.showLoading({title:"",mask:!1});var t=e.tempFilePaths[0],o="UNIAPP"+n.getTime()+"userHeader.png";a.default.upload(t,(function(e){uni.hideLoading(),i("log","上传成功"," at pages/yijian-fankui/yijian-fankui.vue:71"),i("log",e," at pages/yijian-fankui/yijian-fankui.vue:72"),n.imgPath=e.imageURL}),(function(i){uni.hideLoading(),uni.showToast({title:"上传失败，请重试",icon:"none"})}),{region:"ECN",domain:getApp().globalData.qiniuimageurl,key:o,uptoken:n.QiNiutoken})}}})}})},getTime:function(){var i=(new Date).getFullYear(),e=(new Date).getMonth()+1,n=(new Date).getDate(),t=(new Date).getHours(),a=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),o=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();return i+e+n+t+a+o},decypt:function(i){for(var e="",n="1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&",t=0;t<i.length;t++)for(var a=i[t],o=0;o<n.length;o++){var u=n[o];a==u&&(e+=0==o?n[n.length-1]:n[o-1])}return e},subyijian:function(){if(""!=this.yijian){var e=o.globalData;uni.request({url:e.site_url+"Feedback.Add",method:"GET",data:{uid:e.userinfo.id,token:e.userinfo.token,thumb:this.imgPath,content:this.yijian},success:function(e){i("log",e," at pages/yijian-fankui/yijian-fankui.vue:136"),uni.showToast({icon:"none",title:e.data.data.msg}),0===parseInt(e.data.data.code)&&setTimeout((function(){uni.navigateBack({delta:1})}),500)},fail:function(){uni.showToast({icon:"none",title:"网络错误"})}})}}}};e.default=u}).call(this,n("0de9")["log"])},4297:function(i,e,n){"use strict";var t=n("d330"),a=n.n(t);a.a},6726:function(i,e,n){"use strict";var t;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return t}));var a=function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"line"}),n("v-uni-view",{staticClass:"yijian-wrap"},[n("v-uni-textarea",{staticClass:"yijian-txt",attrs:{placeholder:"请输入您的反馈内容(最多500字)","placeholder-style":"padding-top: 10rpx; font-size: 26rpx; color:#969696;"},model:{value:i.yijian,callback:function(e){i.yijian=e},expression:"yijian"}}),n("v-uni-image",{staticClass:"img-wrap",attrs:{src:i.imgPath,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.photo.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"submit-wrap",class:{opatity:i.enabled},attrs:{enabled:!1},on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.subyijian.apply(void 0,arguments)}}},[i._v("提交")])],1)],1)},o=[]},"6bbc":function(i,e,n){"use strict";n.r(e);var t=n("6726"),a=n("a7d6");for(var o in a)"default"!==o&&function(i){n.d(e,i,(function(){return a[i]}))}(o);n("4297");var u,r=n("f0c5"),l=Object(r["a"])(a["default"],t["b"],t["c"],!1,null,"2feb0f82",null,!1,t["a"],u);e["default"]=l.exports},"7c49":function(i,e,n){(function(e){n("ac1f"),n("1276"),function(){var n={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1};function t(i){n={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1},a(i)}function a(i){i.region?n.qiniuRegion=i.region:e("error","qiniu uploader need your bucket region"," at qiniuUploader.js:36"),i.uptoken?n.qiniuUploadToken=i.uptoken:i.uptokenURL?n.qiniuUploadTokenURL=i.uptokenURL:i.uptokenFunc&&(n.qiniuUploadTokenFunction=i.uptokenFunc),i.domain&&(n.qiniuImageURLPrefix=i.domain),n.qiniuShouldUseQiniuFileName=i.shouldUseQiniuFileName}function o(i,t,o,l,c,s,d,p){if(null!=i)if(l&&a(l),n.qiniuUploadToken)u(i,t,o,l,c,s,d,p);else if(n.qiniuUploadTokenURL)r((function(){u(i,t,o,l,c,s,d,p)}));else{if(!n.qiniuUploadTokenFunction)return void e("error","qiniu uploader need one of [uptoken, uptokenURL, uptokenFunc]"," at qiniuUploader.js:73");if(n.qiniuUploadToken=n.qiniuUploadTokenFunction(),null==n.qiniuUploadToken&&n.qiniuUploadToken.length>0)return void e("error","qiniu UploadTokenFunction result is null, please check the return value"," at qiniuUploader.js:68");u(i,t,o,l,c,s,d,p)}else e("error","qiniu uploader need filePath to upload"," at qiniuUploader.js:53")}function u(i,t,a,o,u,r,c,s){if(null==n.qiniuUploadToken&&n.qiniuUploadToken.length>0)e("error","qiniu UploadToken is null, please check the init config or networking"," at qiniuUploader.js:80");else{var d=l(n.qiniuRegion),p=i.split("//")[1];o&&o.key&&(p=o.key);var f={token:n.qiniuUploadToken};n.qiniuShouldUseQiniuFileName||(f["key"]=p),c&&c();var g=wx.uploadFile({url:d,filePath:i,name:"file",formData:f,success:function(i){var o=i.data;try{var u=JSON.parse(o),r=n.qiniuImageURLPrefix+"/"+u.key;u.fileUrl=r,u.imageURL=r,e("log",u," at qiniuUploader.js:112"),t&&t(u)}catch(l){e("log","parse JSON failed, origin String is: "+o," at qiniuUploader.js:117"),a&&a(l)}},fail:function(i){e("error",i," at qiniuUploader.js:124"),a&&a(i)},complete:function(i){s&&s(i)}});g.onProgressUpdate((function(i){u&&u(i)})),r&&r((function(){g.abort()}))}}function r(i){wx.request({url:n.qiniuUploadTokenURL,success:function(t){var a=t.data.uptoken;a&&a.length>0?(n.qiniuUploadToken=a,i&&i()):e("error","qiniuUploader cannot get your token, please check the uptokenURL or server"," at qiniuUploader.js:154")},fail:function(i){e("error","qiniu UploadToken is null, please check the init config or networking: "+i," at qiniuUploader.js:158")}})}function l(i){var n=null;switch(i){case"ECN":n="https://up.qiniup.com";break;case"NCN":n="https://up-z1.qiniup.com";break;case"SCN":n="https://up-z2.qiniup.com";break;case"NA":n="https://up-na0.qiniup.com";break;case"ASG":n="https://up-as0.qiniup.com";break;default:e("error","please make the region is with one of [ECN, SCN, NCN, NA, ASG]"," at qiniuUploader.js:171")}return n}i.exports={init:t,upload:o}}()}).call(this,n("0de9")["log"])},"9c58":function(i,e,n){var t=n("24fb");e=t(!1),e.push([i.i,".line[data-v-2feb0f82]{width:100%;height:%?1?%;background-color:#f0f0f0}.yijian-wrap[data-v-2feb0f82]{width:92%;height:%?400?%;margin:0 auto;background-color:#f0f0f0}.yijian-txt[data-v-2feb0f82]{margin-top:%?20?%;padding-top:%?20?%;margin-left:calc(2%);width:96%;height:100%}\n\t/* 相册 */.img-wrap[data-v-2feb0f82]{margin-top:%?45?%;width:%?150?%;height:%?150?%;line-height:%?150?%;text-align:center;background-color:#f2f6fc;position:relative}.gai[data-v-2feb0f82]{left:0;top:0}.jiahao-txt[data-v-2feb0f82]{font-size:%?60?%;color:#969696}\n\t/* 提交 */.submit-wrap[data-v-2feb0f82]{height:%?80?%;line-height:%?80?%;width:90%;color:#fff;font-size:%?30?%;text-align:center;-webkit-border-radius:%?37?%;border-radius:%?37?%;position:fixed;left:calc(4.8%);bottom:%?50?%;background:-webkit-gradient(linear,left top,right top,from(#7bd68e),to(#65ccb9));background:-webkit-linear-gradient(left,#7bd68e,#65ccb9);background:linear-gradient(90deg,#7bd68e,#65ccb9)}.opatity[data-v-2feb0f82]{opacity:.5}",""]),i.exports=e},a7d6:function(i,e,n){"use strict";n.r(e);var t=n("35a8"),a=n.n(t);for(var o in t)"default"!==o&&function(i){n.d(e,i,(function(){return t[i]}))}(o);e["default"]=a.a},d330:function(i,e,n){var t=n("9c58");"string"===typeof t&&(t=[[i.i,t,""]]),t.locals&&(i.exports=t.locals);var a=n("4f06").default;a("042eae86",t,!0,{sourceMap:!1,shadowMode:!1})}}]);